<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>模态框测试</title>
    <link href="https://cdn.bootcdn.net/ajax/libs/bootstrap/5.1.3/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-5">
        <h1>模态框测试页面</h1>
        
        <div class="alert alert-info">
            <h4>测试步骤：</h4>
            <ol>
                <li>点击下面的"测试模态框"按钮</li>
                <li>如果弹出窗口，说明 Bootstrap 工作正常</li>
                <li>如果没有反应，说明 Bootstrap JS 加载失败</li>
            </ol>
        </div>
        
        <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#testModal">
            测试模态框
        </button>
        
        <button type="button" class="btn btn-success" onclick="testManual()">
            手动触发模态框
        </button>
        
        <div class="mt-3">
            <h4>诊断信息：</h4>
            <div id="diagnostics"></div>
        </div>
    </div>

    <!-- 测试模态框 -->
    <div class="modal fade" id="testModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">测试成功！</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <p>如果你看到这个窗口，说明 Bootstrap 模态框工作正常。</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">关闭</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.bootcdn.net/ajax/libs/bootstrap/5.1.3/js/bootstrap.bundle.min.js"></script>
    <script>
        // 诊断信息
        const diagnostics = document.getElementById('diagnostics');
        
        // 检查 Bootstrap 是否加载
        if (typeof bootstrap !== 'undefined') {
            diagnostics.innerHTML += '<p class="text-success">✓ Bootstrap JS 已加载</p>';
        } else {
            diagnostics.innerHTML += '<p class="text-danger">✗ Bootstrap JS 未加载</p>';
        }
        
        // 检查 Modal 类是否存在
        if (typeof bootstrap !== 'undefined' && bootstrap.Modal) {
            diagnostics.innerHTML += '<p class="text-success">✓ Bootstrap Modal 类可用</p>';
        } else {
            diagnostics.innerHTML += '<p class="text-danger">✗ Bootstrap Modal 类不可用</p>';
        }
        
        // 手动触发模态框
        function testManual() {
            if (typeof bootstrap !== 'undefined' && bootstrap.Modal) {
                const modal = new bootstrap.Modal(document.getElementById('testModal'));
                modal.show();
                diagnostics.innerHTML += '<p class="text-info">→ 手动触发模态框</p>';
            } else {
                alert('Bootstrap 未正确加载！');
            }
        }
        
        // 监听模态框事件
        const testModal = document.getElementById('testModal');
        if (testModal) {
            testModal.addEventListener('show.bs.modal', function () {
                diagnostics.innerHTML += '<p class="text-success">✓ 模态框显示事件触发</p>';
            });
            
            testModal.addEventListener('shown.bs.modal', function () {
                diagnostics.innerHTML += '<p class="text-success">✓ 模态框已完全显示</p>';
            });
        }
    </script>
</body>
</html>
