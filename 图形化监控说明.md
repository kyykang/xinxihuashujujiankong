# 图形化监控仪表板使用说明

## 功能概述

系统现在提供了完整的图形化监控界面，包括实时数据展示、历史趋势分析和多维度可视化。

## 主要功能

### 1. 监控仪表板 (Dashboard)

访问：http://localhost:8080/dashboard

#### 统计卡片
- **监控目标**：显示当前启用的监控目标总数
- **近1小时告警**：显示最近1小时内的告警数量
- **在线服务**：显示当前正常运行的服务数量
- **离线/异常**：显示当前离线或异常的服务数量

#### 服务器监控图表
- 每个服务器监控目标显示一个独立的柱状图
- 实时展示 CPU、内存、磁盘使用率
- 颜色编码：
  - 蓝色：CPU
  - 黄色：内存
  - 红色：磁盘
- 状态标签：正常（绿色）/ 异常（红色）

#### 应用和数据库状态列表
- 左侧：应用监控状态列表
- 右侧：数据库监控状态列表
- 显示在线/离线状态和最后更新时间

#### 自动刷新
- 统计数据每30秒自动更新
- 点击"刷新"按钮可手动刷新整个页面

---

### 2. 监控详情页面

访问方式：
- 在"监控目标"页面点击"详情"按钮
- 或直接访问：http://localhost:8080/monitor/{target_id}

#### 基本信息卡片
显示监控目标的基本信息：
- 监控类型
- 启用状态
- 创建时间
- 数据点数量

#### 服务器监控详情（针对服务器类型）

**1. 资源使用趋势图（折线图）**
- 同时显示 CPU、内存、磁盘的历史趋势
- 支持时间范围选择：
  - 最近1小时
  - 最近6小时
  - 最近12小时
  - 最近24小时
- 平滑曲线显示，便于观察变化趋势

**2. 当前使用率饼图**
- CPU 使用率饼图
- 内存使用率饼图
- 磁盘使用率饼图
- 直观显示已使用和空闲比例

**3. 监控记录表格**
- 显示最近50条监控记录
- 包含时间、状态、详细数据
- 按时间倒序排列

#### 自动刷新
- 数据每30秒自动更新
- 保持选择的时间范围

---

## 图表类型说明

### 柱状图 (Bar Chart)
**用途**：仪表板中的服务器监控
**特点**：
- 并排显示多个指标
- 便于对比不同资源的使用情况
- Y轴范围：0-100%

### 折线图 (Line Chart)
**用途**：详情页面的历史趋势
**特点**：
- 显示数据随时间的变化
- 多条线对比不同指标
- 平滑曲线，易于观察趋势

### 饼图 (Doughnut Chart)
**用途**：详情页面的当前使用率
**特点**：
- 直观显示占比关系
- 已使用 vs 空闲
- 圆环样式，美观简洁

---

## 使用场景

### 场景1：快速查看系统整体状态
1. 访问仪表板
2. 查看统计卡片了解总体情况
3. 浏览服务器图表查看资源使用
4. 检查应用和数据库状态列表

### 场景2：分析服务器性能趋势
1. 在监控目标页面点击服务器的"详情"
2. 查看资源使用趋势图
3. 选择不同时间范围观察变化
4. 分析是否有异常波动

### 场景3：诊断资源问题
1. 在仪表板发现某服务器异常
2. 点击进入详情页面
3. 查看饼图确认哪个资源使用率高
4. 查看趋势图确认是持续高负载还是突发
5. 查看监控记录表格找到具体时间点

### 场景4：容量规划
1. 查看长期趋势（24小时）
2. 分析资源使用模式
3. 预测未来需求
4. 制定扩容计划

---

## 颜色编码说明

### 状态颜色
- **绿色**：正常/在线
- **红色**：异常/离线
- **黄色**：警告
- **灰色**：禁用/未知

### 资源颜色
- **蓝色**：CPU
- **黄色**：内存
- **红色**：磁盘

---

## 性能优化建议

### 数据量控制
- 仪表板只显示最新数据点
- 详情页面根据时间范围加载数据
- 最多显示最近50条记录

### 刷新策略
- 仪表板统计：30秒自动刷新
- 详情页面：30秒自动刷新
- 避免频繁手动刷新

### 浏览器兼容性
- 推荐使用 Chrome、Firefox、Edge 最新版本
- 需要启用 JavaScript
- 建议屏幕分辨率 1920x1080 或更高

---

## 常见问题

### Q1: 图表不显示？
**可能原因：**
- 监控数据还未采集
- JavaScript 被禁用
- CDN 资源加载失败

**解决方法：**
1. 等待监控系统采集数据（60秒）
2. 检查浏览器控制台是否有错误
3. 刷新页面（Ctrl+Shift+R）

### Q2: 数据不更新？
**可能原因：**
- 监控目标被禁用
- 监控服务未运行
- 网络连接问题

**解决方法：**
1. 检查监控目标状态是否为"启用"
2. 查看服务器终端是否有错误
3. 手动点击刷新按钮

### Q3: 趋势图显示不完整？
**可能原因：**
- 数据采集时间不够长
- 选择的时间范围过大

**解决方法：**
1. 选择较短的时间范围
2. 等待系统采集更多数据
3. 检查监控间隔设置

### Q4: 图表显示异常？
**可能原因：**
- 浏览器缓存问题
- Chart.js 库加载失败

**解决方法：**
1. 清除浏览器缓存
2. 强制刷新页面（Ctrl+Shift+R）
3. 检查网络连接

---

## 高级功能

### 自定义时间范围
在详情页面可以选择不同的时间范围：
- 1小时：查看短期波动
- 6小时：查看半天趋势
- 12小时：查看日间/夜间对比
- 24小时：查看完整日周期

### 数据导出（计划中）
未来版本将支持：
- 导出监控数据为 CSV
- 生成 PDF 报告
- 自定义报表

### 告警可视化（计划中）
未来版本将支持：
- 在趋势图上标记告警点
- 告警频率统计
- 告警热力图

---

## 最佳实践

1. **定期查看仪表板**：每天至少查看一次，了解系统整体状态

2. **关注趋势变化**：不仅看当前值，更要关注趋势是否异常

3. **设置合理阈值**：根据实际情况调整告警阈值，避免误报

4. **保留历史数据**：定期备份数据库，保留长期趋势数据

5. **多维度分析**：结合多个监控指标综合判断问题

6. **及时响应告警**：发现异常及时处理，避免问题扩大

---

## 技术细节

### 使用的图表库
- **Chart.js 3.7.0**：开源 JavaScript 图表库
- 响应式设计，自适应屏幕大小
- 支持动画效果

### 数据更新机制
- 前端定时轮询 API
- 后端从数据库读取最新数据
- 使用 JSON 格式传输

### 浏览器要求
- 支持 ES6+ JavaScript
- 支持 Canvas API
- 支持 Fetch API

---

**提示**：图形化监控让数据更直观，但不要忽略原始数据和日志分析！
